<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Belta Bird">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#70c5ce">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <title>Belta Bird | Standalone</title>
    
    <style>
        * { box-sizing: border-box; }
        body { 
            margin: 0; padding: 0; overflow: hidden; 
            background: #70c5ce; font-family: 'Arial', sans-serif;
            -webkit-user-select: none; user-select: none;
            touch-action: manipulation;
        }
        canvas { display: block; }
        
        #scoreBoard {
            position: fixed; top: env(safe-area-inset-top, 20px); 
            width: 100%; text-align: center;
            color: white; font-size: 50px; font-weight: bold;
            text-shadow: 3px 3px 0 #000; pointer-events: none; z-index: 10;
        }

        #menu {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.4);
            display: flex; flex-direction: column; justify-content: center;
            align-items: center; z-index: 20; color: white;
            text-align: center;
        }
        .btn {
            background: #f7d308; color: black; padding: 15px 40px;
            font-size: 20px; font-weight: bold; border-radius: 10px;
            border: 4px solid white; cursor: pointer; text-transform: uppercase;
        }
        h1 { font-size: 40px; margin-bottom: 10px; text-shadow: 2px 2px #000; }
    </style>
</head>
<body>

<div id="scoreBoard">0</div>

<div id="menu">
    <h1>BELTA BIRD</h1>
    <p>Tap to start flying!</p>
    <div class="btn" onclick="startGame()">Start Game</div>
    <p style="font-size: 12px; margin-top: 20px;">Add to Home Screen for Fullscreen Mode</p>
</div>

<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const scoreEl = document.getElementById('scoreBoard');
const menu = document.getElementById('menu');

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let bird = { x: 50, y: canvas.height/2, w: 38, h: 28, gravity: 0.5, lift: -8, velocity: 0 };
let pipes = [];
let frame = 0;
let score = 0;
let gameActive = false;

function startGame() {
    menu.style.display = 'none';
    resetGame();
}

function resetGame() {
    bird.y = canvas.height/2;
    bird.velocity = 0;
    pipes = [];
    score = 0;
    frame = 0;
    scoreEl.innerText = '0';
    gameActive = true;
}

function update() {
    if (!gameActive) return;

    bird.velocity += bird.gravity;
    bird.y += bird.velocity;

    if (frame % 100 === 0) {
        let gap = 170;
        let pipeHeight = Math.random() * (canvas.height / 2);
        pipes.push({ x: canvas.width, top: pipeHeight, bottom: canvas.height - pipeHeight - gap, w: 60 });
    }

    for (let i = pipes.length - 1; i >= 0; i--) {
        pipes[i].x -= 3.5;

        // Collision detection
        if (bird.x + bird.w > pipes[i].x && bird.x < pipes[i].x + pipes[i].w) {
            if (bird.y < pipes[i].top || bird.y + bird.h > canvas.height - pipes[i].bottom) {
                gameOver();
            }
        }

        if (pipes[i].x + pipes[i].w < 0) {
            pipes.splice(i, 1);
            score++;
            scoreEl.innerText = score;
        }
    }

    if (bird.y + bird.h > canvas.height || bird.y < 0) gameOver();
    frame++;
}

function gameOver() {
    gameActive = false;
    menu.style.display = 'flex';
    menu.querySelector('h1').innerText = "GAME OVER";
    menu.querySelector('p').innerText = "Final Score: " + score;
}

function draw() {
    // Sky
    ctx.fillStyle = "#70c5ce";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Pipes
    ctx.fillStyle = "#75b855";
    pipes.forEach(p => {
        ctx.strokeStyle = "#222";
        ctx.lineWidth = 2;
        ctx.fillRect(p.x, 0, p.w, p.top);
        ctx.strokeRect(p.x, 0, p.w, p.top);
        ctx.fillRect(p.x, canvas.height - p.bottom, p.w, p.bottom);
        ctx.strokeRect(p.x, canvas.height - p.bottom, p.w, p.bottom);
    });

    // Bird (Belta Bird Body)
    ctx.fillStyle = "#f7d308";
    ctx.fillRect(bird.x, bird.y, bird.w, bird.h);
    ctx.strokeStyle = "#000";
    ctx.strokeRect(bird.x, bird.y, bird.w, bird.h);
    
    // Eye
    ctx.fillStyle = "white";
    ctx.fillRect(bird.x + 25, bird.y + 5, 8, 8);
    ctx.fillStyle = "black";
    ctx.fillRect(bird.x + 30, bird.y + 7, 4, 4);

    // Beak
    ctx.fillStyle = "#ff5722";
    ctx.fillRect(bird.x + 35, bird.y + 15, 10, 8);
}

function loop() {
    update();
    draw();
    requestAnimationFrame(loop);
}

// Controls
function jump() {
    if (gameActive) bird.velocity = bird.lift;
}

window.addEventListener('mousedown', jump);
window.addEventListener('touchstart', (e) => {
    if(e.target.className !== 'btn') {
        e.preventDefault();
        jump();
    }
}, {passive: false});

loop();
</script>
</body>
</html>
