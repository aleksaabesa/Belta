<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Belta Bird</title>
    <style>
        body { margin: 0; overflow: hidden; font-family: 'Arial', sans-serif; background: #70c5ce; }
        canvas { display: block; }
        #scoreBoard {
            position: fixed; top: 20px; width: 100%; text-align: center;
            color: white; font-size: 40px; font-weight: bold;
            text-shadow: 2px 2px #000; pointer-events: none;
        }
    </style>
</head>
<body>

<div id="scoreBoard">0</div>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const scoreEl = document.getElementById('scoreBoard');

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// თამაშის ცვლადები
let bird = { x: 50, y: canvas.height/2, w: 34, h: 24, gravity: 0.6, lift: -10, velocity: 0 };
let pipes = [];
let frame = 0;
let score = 0;
let gameActive = true;

function createPipe() {
    let gap = 150;
    let minHeight = 50;
    let height = Math.floor(Math.random() * (canvas.height - gap - minHeight * 2)) + minHeight;
    pipes.push({ x: canvas.width, top: height, bottom: canvas.height - height - gap, w: 50 });
}

function resetGame() {
    bird.y = canvas.height/2;
    bird.velocity = 0;
    pipes = [];
    score = 0;
    frame = 0;
    scoreEl.innerText = '0';
    gameActive = true;
}

function update() {
    if (!gameActive) return;

    bird.velocity += bird.gravity;
    bird.y += bird.velocity;

    if (frame % 90 === 0) createPipe();

    for (let i = pipes.length - 1; i >= 0; i--) {
        pipes[i].x -= 3;

        // შეჯახება
        if (bird.x + bird.w > pipes[i].x && bird.x < pipes[i].x + pipes[i].w) {
            if (bird.y < pipes[i].top || bird.y + bird.h > canvas.height - pipes[i].bottom) {
                gameActive = false;
            }
        }

        if (pipes[i].x + pipes[i].w < 0) {
            pipes.splice(i, 1);
            score++;
            scoreEl.innerText = score;
        }
    }

    if (bird.y + bird.h > canvas.height || bird.y < 0) gameActive = false;
    frame++;
}

function draw() {
    // ფონი
    ctx.fillStyle = "#70c5ce";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // მილები
    ctx.fillStyle = "#75b855";
    pipes.forEach(p => {
        ctx.fillRect(p.x, 0, p.w, p.top); // ზედა
        ctx.fillRect(p.x, canvas.height - p.bottom, p.w, p.bottom); // ქვედა
    });

    // ჩიტი (Belta Bird)
    ctx.fillStyle = "#f7d308";
    ctx.fillRect(bird.x, bird.y, bird.w, bird.h);
    
    // თვალის დახატვა
    ctx.fillStyle = "black";
    ctx.fillRect(bird.x + 20, bird.y + 5, 5, 5);

    if (!gameActive) {
        ctx.fillStyle = "rgba(0,0,0,0.5)";
        ctx.fillRect(0,0,canvas.width, canvas.height);
        ctx.fillStyle = "white";
        ctx.font = "30px Arial";
        ctx.fillText("GAME OVER", canvas.width/2 - 80, canvas.height/2);
        ctx.font = "20px Arial";
        ctx.fillText("Tap to Restart", canvas.width/2 - 60, canvas.height/2 + 40);
    }
}

function loop() {
    update();
    draw();
    requestAnimationFrame(loop);
}

// კონტროლი
window.addEventListener('mousedown', () => {
    if (gameActive) bird.velocity = bird.lift;
    else resetGame();
});

window.addEventListener('touchstart', (e) => {
    e.preventDefault();
    if (gameActive) bird.velocity = bird.lift;
    else resetGame();
});

loop();
</script>
</body>
</html>
